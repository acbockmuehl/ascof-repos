<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ASCOF Benchmarking Tool</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Tom Select -->
  <link href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js"></script>

  <style>
    .ts-wrapper.single .ts-control {
      font-size: 1rem;
      line-height: 1.5rem;
      font-family: inherit;
      border-radius: 0.5rem;
      border: 1px solid #d1d5db;
      box-shadow: none !important;
      padding: 0.5rem 0.75rem;
      background-color: white;
    }

    .ts-wrapper.single.focus .ts-control {
      border-color: #3b82f6;
      box-shadow: 0 0 0 1px #3b82f6;
    }

    .ts-dropdown {
      font-size: 1rem;
      line-height: 1.5rem;
      font-family: inherit;
      border-radius: 0.5rem;
    }

    .ts-control {
      outline: none;
      background-color: white;
    }
  </style>
</head>

<body class="bg-gray-50 text-gray-900 font-sans min-h-screen flex flex-col">
  <!-- Header -->
  <header class="p-6 border-b border-gray-200 bg-white shadow-sm">
    <div class="max-w-screen-xl mx-auto">
      <h1 class="text-3xl font-semibold text-gray-800">ASCOF Benchmarking Tool</h1>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex-1 py-8">
    <div class="max-w-screen-xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6 px-6">
      
      <!-- Chart & Table -->
      <div class="lg:col-span-2 space-y-6">
        <!-- Chart -->
        <div class="bg-white p-6 rounded-xl shadow">
          <h2 class="text-xl font-semibold mb-4">Comparator Chart</h2>
          <div class="min-h-[400px]">
            <canvas id="paretoChart" class="w-full h-full"></canvas>
          </div>
        </div>

        <!-- Benchmarking Table -->
        <div class="bg-white p-6 rounded-xl shadow">
          <h2 class="text-xl font-semibold mb-4">Benchmarking Table</h2>
          <div id="laMeasuresTable" class="overflow-x-auto">
            <table class="min-w-full text-left border rounded">
              <thead class="bg-gray-100 border-b">
                <tr>
                  <th class="px-4 py-2 text-sm font-medium">Measure Group</th>
                  <th class="px-4 py-2 text-sm font-medium">Description</th>
                  <th class="px-4 py-2 text-sm font-medium">Value</th>
                  <th class="px-4 py-2 text-sm font-medium">National Percentile</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="px-4 py-2 text-sm text-gray-500" colspan="4">Select a local authority to see benchmarking detail</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Sidebar Filters -->
      <aside class="bg-white p-6 rounded-xl shadow space-y-6 self-start">
        <div>
          <label for="highlightSelect" class="block mb-1 text-sm font-medium text-gray-700">Select Local Authority</label>
          <select id="highlightSelect" class="w-full"></select>
        </div>

        <div>
          <label for="measureSelect" class="block mb-1 text-sm font-medium text-gray-700">ASCOF Measure</label>
          <select id="measureSelect" class="w-full border border-gray-300 rounded-lg p-2">
            {% for value, label in measure_groups %}
              <option value="{{ value }}">{{ label }}</option>
            {% endfor %}
          </select>
        </div>

        <div>
          <label for="regionSelect" class="block mb-1 text-sm font-medium text-gray-700">Region(s)</label>
          <select id="regionSelect" multiple class="w-full border border-gray-300 rounded-lg p-2 h-32">
            {% for region in regions %}
              <option value="{{ region }}">{{ region }}</option>
            {% endfor %}
          </select>
        </div>

        <div>
          <label for="disaggSelect" class="block mb-1 text-sm font-medium text-gray-700">Disaggregation Level</label>
          <select id="disaggSelect" class="w-full border border-gray-300 rounded-lg p-2">
            {% for d in disaggregations %}
              <option value="{{ d }}">{{ d }}</option>
            {% endfor %}
          </select>
        </div>

        <!-- Summary Output -->
        <div id="mistralSummary" class="text-sm text-gray-700 whitespace-pre-wrap pt-2 border-t"></div>
      </aside>
    </div>
  </main>

  <script src="/static/script.js"></script>
</body>
</html>
